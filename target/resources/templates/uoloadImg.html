
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>上传图片</title>
</head>
<body>
     <img src="/file/readFile/155055536723880461428"  id="image" width="300px" height="300px">
    <form name="uploadimg">
      <input name="fileName" type="file" id="uploadimg" onchange="uploadheadimg()" />
    </form>
    <br>
<script src="/static/js/jquery.js"></script>
<script src="/static/js/jquery-form.js"></script>

<script>

var param=["appid","sjs","shc"];
param.sort();
var newparam="";
for(var i=0;i<param.length;i++){
	newparam+=param[i];
}
alert(newparam);



function uploadheadimg(){
	
	var fileName = $("#uploadimg").val();
	var fileType = fileName.substring(fileName.lastIndexOf('.') + 1, fileName.length).toLocaleLowerCase();
	/* if (fileType != 'jpg' && fileType != 'bmp' && fileType != 'png' && fileType != "jpeg") {
		alert('图片必须为jpg、jpeg、bmp、png格式！');
		return false;
	} */
	 var options  = {    
		        url:'/file/uploadFile',    
		        type:'post',   
		        dataType:'json',
		        beforeSubmit:function(){
		        	
		        	
	            },
	            beforeSend: function() {
	               
	            },
	            uploadProgress: function(event, position, total, percentComplete) {//上传的过程
	                console.log(percentComplete+"/"+total)
	            },
		        success:function(data){  
		        	alert(data);
		        }
		        	
		    };   
	
	   $("form[name='uploadimg']").ajaxSubmit(options);
	 
	 

	
}


</script>

</body>
</html>